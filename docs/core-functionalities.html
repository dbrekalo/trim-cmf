<!DOCTYPE html><html><head lang="en"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,minimal-ui"><meta name="theme-color" content="#ffffff"><title>Core functionalites - Trim UI CMF</title><link rel="stylesheet" href="https://gitcdn.xyz/repo/dbrekalo/attire/master/dist/css/docsBuild.min.css"></head><body><header class="attireHeader"><h1 class="title">Trim UI CMF</h1><div class="attireSearch iconSearch"><input placeholder="Search documentation" type="text"></div></header><nav class="attireNav navType1"><button type="button" class="toggleBtn nBtn iconMenu">Toggle navigation</button><div class="panel"><div class="content"><a class="docLink" data-pointer="about#about" href="about#about">About</a><ul><li><a class="docLink" data-pointer="about#motivation" href="about#motivation">Motivation</a></li><li><a class="docLink" data-pointer="about#technology-and-tooling" href="about#technology-and-tooling">Technology and tooling</a></li><li><a class="docLink" data-pointer="about#code-sneek-peek" href="about#code-sneek-peek">Code sneek peek</a></li><li><a class="docLink" data-pointer="about#demo-application" href="about#demo-application">Demo application</a></li></ul><a class="docLink" data-pointer="getting-started#getting-started" href="getting-started#getting-started">Getting started</a><ul><li><a class="docLink" data-pointer="getting-started#technology" href="getting-started#technology">Technology</a></li><li><a class="docLink" data-pointer="getting-started#file-and-folder-structure" href="getting-started#file-and-folder-structure">File and folder structure</a></li><li><a class="docLink" data-pointer="getting-started#package-json" href="getting-started#package-json">Package.json</a></li><li><a class="docLink" data-pointer="getting-started#webpack-grunt-eslint" href="getting-started#webpack-grunt-eslint">Webpack, Grunt, Eslint</a></li><li><a class="docLink" data-pointer="getting-started#html-entry-point" href="getting-started#html-entry-point">HTML entry point</a></li><li><a class="docLink" data-pointer="getting-started#scss-setup" href="getting-started#scss-setup">SCSS setup</a></li><li><a class="docLink" data-pointer="getting-started#javascript-setup" href="getting-started#javascript-setup">Javascript setup</a></li><li><a class="docLink" data-pointer="getting-started#build-scripts" href="getting-started#build-scripts">Build scripts</a></li></ul><a class="docLink" data-pointer="core-functionalities#core-functionalites" href="core-functionalities#core-functionalites">Core functionalites</a><ul><li><a class="docLink" data-pointer="core-functionalities#backend-api" href="core-functionalities#backend-api">Backend API</a></li><li><a class="docLink" data-pointer="core-functionalities#resource-controller" href="core-functionalities#resource-controller">Resource controller</a></li><li><a class="docLink" data-pointer="core-functionalities#services" href="core-functionalities#services">Services</a></li><li><a class="docLink" data-pointer="core-functionalities#router" href="core-functionalities#router">Router</a></li><li><a class="docLink" data-pointer="core-functionalities#navigation" href="core-functionalities#navigation">Navigation</a></li><li><a class="docLink" data-pointer="core-functionalities#localization" href="core-functionalities#localization">Localization</a></li></ul><a class="docLink" data-pointer="adding-resource#adding-resource-controller" href="adding-resource#adding-resource-controller">Adding resource controller</a><ul><li><a class="docLink" data-pointer="adding-resource#resource-api-endoint" href="adding-resource#resource-api-endoint">Resource API endoint</a></li><li><a class="docLink" data-pointer="adding-resource#create-resource-controller" href="adding-resource#create-resource-controller">Create resource controller</a></li><li><a class="docLink" data-pointer="adding-resource#register-controller-as-service" href="adding-resource#register-controller-as-service">Register controller as service</a></li><li><a class="docLink" data-pointer="adding-resource#add-route" href="adding-resource#add-route">Add route</a></li><li><a class="docLink" data-pointer="adding-resource#add-navigation-item" href="adding-resource#add-navigation-item">Add navigation item</a></li></ul><a class="docLink" data-pointer="list-elements#list-elements" href="list-elements#list-elements">List elements</a><ul><li><a class="docLink" data-pointer="list-elements#text" href="list-elements#text">Text</a></li><li><a class="docLink" data-pointer="list-elements#link" href="list-elements#link">Link</a></li><li><a class="docLink" data-pointer="list-elements#date-time" href="list-elements#date-time">Date time</a></li><li><a class="docLink" data-pointer="list-elements#date" href="list-elements#date">Date</a></li><li><a class="docLink" data-pointer="list-elements#media" href="list-elements#media">Media</a></li><li><a class="docLink" data-pointer="list-elements#blip" href="list-elements#blip">Blip</a></li><li><a class="docLink" data-pointer="list-elements#button" href="list-elements#button">Button</a></li><li><a class="docLink" data-pointer="list-elements#context-menu" href="list-elements#context-menu">Context menu</a></li></ul><a class="docLink" data-pointer="form-elements#form-elements" href="form-elements#form-elements">Form elements</a><ul><li><a class="docLink" data-pointer="form-elements#text-input" href="form-elements#text-input">Text input</a></li><li><a class="docLink" data-pointer="form-elements#hidden-input" href="form-elements#hidden-input">Hidden input</a></li><li><a class="docLink" data-pointer="form-elements#textarea-input" href="form-elements#textarea-input">Textarea input</a></li><li><a class="docLink" data-pointer="form-elements#checkbox-input" href="form-elements#checkbox-input">Checkbox input</a></li><li><a class="docLink" data-pointer="form-elements#date-input" href="form-elements#date-input">Date input</a></li><li><a class="docLink" data-pointer="form-elements#date-time-input" href="form-elements#date-time-input">Date time input</a></li><li><a class="docLink" data-pointer="form-elements#html" href="form-elements#html">Html</a></li><li><a class="docLink" data-pointer="form-elements#map" href="form-elements#map">Map</a></li><li><a class="docLink" data-pointer="form-elements#select" href="form-elements#select">Select</a></li><li><a class="docLink" data-pointer="form-elements#multiple-select" href="form-elements#multiple-select">Multiple select</a></li><li><a class="docLink" data-pointer="form-elements#nested-select" href="form-elements#nested-select">Nested select</a></li><li><a class="docLink" data-pointer="form-elements#state-select" href="form-elements#state-select">State select</a></li><li><a class="docLink" data-pointer="form-elements#external-admin" href="form-elements#external-admin">External admin</a></li><li><a class="docLink" data-pointer="form-elements#included-admin" href="form-elements#included-admin">Included admin</a></li><li><a class="docLink" data-pointer="form-elements#media-preview" href="form-elements#media-preview">Media preview</a></li><li><a class="docLink" data-pointer="form-elements#media" href="form-elements#media">Media</a></li></ul></div></div></nav><article data-slug="core-functionalities" class="attireArticle"><section id="section-core-functionalites" class="attireBlock"><div class="inner"><h1 id="core-functionalites" class="attireTitleType1">Core functionalites</h1><p class="attireTextType2">This chapter covers all application core functionalities as backend API, resource controller, services, router, navigation and localization.</p><hr class="attireSeparator mod1"></div></section><section id="section-backend-api" class="attireBlock"><div class="inner"><h2 id="backend-api" class="attireTitleType2">Backend API</h2><p class="attireTextType2">trim-cmf application assumes that backend API responses are formatted as specified by <a href="http://jsonapi.org/">http://jsonapi.org/</a>.</p><hr class="attireSeparator mod1"></div></section><section id="section-resource-controller" class="attireBlock"><div class="inner"><h2 id="resource-controller" class="attireTitleType2">Resource controller</h2><p class="attireTextType2">In resource controller module we can define complete behavior for list, create and edit views for each resource type.</p><p class="attireTextType2">Controler extends following core modules; "js/controllers/baseAdmin", "js/library/view" and backbone-base-view (<a href="https://github.com/dbrekalo/backbone-base-view">https://github.com/dbrekalo/backbone-base-view</a>) wich is built ontop of standard backbone view.</p><p class="attireTextType2">Controller property:</p><ul class="attireListType1"><li>resourceName: accepts string as uniqe resource name (eg. article)</li><li>resourceCaptionAttribute: accepts string as uniqe resource attribute key (eg. title on article)</li></ul><p class="attireTextType2">Controller methods:</p><ul class="attireListType1"><li>setupList - used for preparing list of items and filters on "listHandler" object</li><li>setupEdit - used for preparing list of form items and layout on "listHandler" object</li><li>addCreateControl - function to add create resource button on resource list with desired caption as parametar</li><li>addToIndexControl - function to add back to resource list button on resource edit/create with desired caption as parametar</li><li>addSaveControl - function to add save resource button on resource edit/create with desired caption as parametar</li></ul><p class="attireTextType2">"listHandler" object:</p><ul class="attireListType1"><li>setTemplate - pass value "cards" if you wish to use card template instead table list (usefull for media resource)</li><li>addFilter - method for adding filter items with first argument as form element module and second as options</li><li>getFieldInstance - method for accesing instance of filter item</li><li>addItem - method for adding list items items with first argument as list element module and second as options</li><li>addMassAction - add mass action UI on resource collection, each item has following option<ul><li>caption - string value representing option caption</li><li>updateAttributes - object with key/value notation for updateing collection models</li><li>action - function with model argument that is called when mass action is invoked (creates defferd array for each resource item)</li><li>massAction - function with argument of models array that is called when mass action is invoked (creates defferd object for all resource items)</li><li>onComplete - function callback whic fires when deffered is resolved</li><li>confirm - if set to true, module prompts user to confirm action, also can accept string value with custom confirm question string</li></ul></li><li>addSort - add sort UI on resource collection, each item has following option<ul><li>label - string value representing option caption</li><li>field - string value that is sent as URL query param ("&amp;sort=[field]")</li></ul></li></ul><p class="attireTextType2">"editHandler" object:</p><ul class="attireListType1"><li>addField - method for adding form items with first argument as form element module and second as options</li><li>getFieldInstance - method for accesing instance of form item</li><li>setLayout - used to define layout as tabs, main and side region and groups</li></ul><p class="attireTextType2">Documentation for all list element modules can be found in chapter "List elements", and for all form element modules can be found in chapter "Form elements".</p><p class="attireTextType2">Resource controller extends core functions found in "js/controllers/baseResource.js" module.</p><h4 id="code-example">Code example</h4><p class="attireTextType2">Demo example can be found here: "trim-cmf/demo-app/src/js/controllers/Page.js"</p><pre class="attireCodeHighlight"><code>var TextInput = require('js/formElements/text');
var LinkListItem = require('js/listElements/link');
var TextareaInput = require('js/formElements/textarea');

module.exports = require('js/controllers/baseResource').extend({

    resourceName: 'page',

    setupList: function(listHandler) {

        this.addCreateControl('Create new page');

        // listHandler.setTemplate('cards');

        listHandler.addFilter(TextInput, {
            name: 'title',
            label: 'Title'
        });

        listHandler.addItem(LinkListItem, {
            caption: 'Title',
            mapTo: 'title',
            action: 'editItem'
        });

        this.listenTo(listHandler, 'change.title', this.logFilterTitle);

        listHandler.addMassAction([{
            caption: 'Publish',
            updateAttributes: {published: true}
        }, {
            caption: 'Unpublish',
            updateAttributes: {published: false}
        }, {
            caption: 'Delete',
            action: function(model) {
                model.destroy();
            },
            onComplete: function() {
                listHandler.refreshItems();
            },
            confirm: true
        }]);

        listHandler.addSort([
            {
                label: 'By title',
                field: '-title'
            },
            {
                label: 'By date',
                field: '-date'
            }
        ]);

    },

    setupEdit: function(editHandler, method, id) {

        this.addToIndexControl().addSaveControl();

        editHandler.addField(TextareaInput, {
            name: 'title',
            attributes: {
                input: {
                    className: 'inputType2 size2 fontBold',
                    placeholder: 'Article title',
                    title: 'Title',
                    style: 'border: 0;'
                },
                wrapper: {
                    style: 'margin: 0 0 1em 0;'
                }
            },
            layoutReference: 'mainContent.mainRegion.group1'
        });

        this.listenTo(editHandler, 'change.title', this.logTitle);

        editHandler.setLayout({
            tabs: [{
                name: 'mainContent',
                caption: 'Content and settings',
                regions: {
                    main: {
                        groups: [{className: 'basicData'}]
                    },
                    side: {
                        groups: [
                            {className: 'layoutGroupType2'},
                            {className: 'layoutGroupType2'},
                            {className: 'layoutGroupType2'},
                            {className: 'layoutGroupType2'}
                        ]
                    }
                }
            }, {
                name: 'seo',
                caption: 'SEO i meta data'
            }]
        });

    },

    logTitle: function(value) {

        // this.editHandler.getFieldInstance('title');

        console.log(value);

    },

    logFilterTitle: function(value) {

        // this.listHandler.getFieldInstance('title');

        console.log(value);

    }

});
</code></pre><hr class="attireSeparator mod1"></div></section><section id="section-services" class="attireBlock"><div class="inner"><h2 id="services" class="attireTitleType2">Services</h2><p class="attireTextType2">Services are just JS object that is passed during application initialization that contains custom resource controllers. Also her you can point to your main navigation override controller. Each resource controller is wrapped in webpack require.ensure method, so it will be loaded only when it is called.</p><p class="attireTextType2">Services object is passed to core "js/library/serviceContainer.js" module.</p><h4 id="code-example">Code example</h4><p class="attireTextType2">Demo example can be found here: "trim-cmf/demo-app/src/js/services.js"</p><pre class="attireCodeHighlight"><code>module.exports = {
    MainNavigation: function(callback) {
        callback(require('js/mainNavigation'));
    },
    ArticleController: function(callback) {
        require.ensure([], function() {
            callback(require('js/controllers/article'));
        });
    },
    TagController: function(callback) {
        require.ensure([], function() {
            callback(require('js/controllers/tag'));
        });
    },
    CategoryController: function(callback) {
        require.ensure([], function() {
            callback(require('js/controllers/category'));
        });
    }
};
</code></pre><p class="attireTextType2">Demo example can be found here: "trim-cmf/demo-app/src/js/main.js"</p><pre class="attireCodeHighlight"><code>var app = require('js/app');
var services = require('js/services');

app.registerServices(services).start();
</code></pre><hr class="attireSeparator mod1"></div></section><section id="section-router" class="attireBlock"><div class="inner"><h2 id="router" class="attireTitleType2">Router</h2><p class="attireTextType2">Here you can define all custom routes for your application.</p><p class="attireTextType2">Calling resource method on router function will create list, create and edit (eg. '/article', '/article/create' and '/article/:id') routes for desired resource.</p><p class="attireTextType2">Calling route method on function router with route, alias and options parameters will create route pointing to controller resource with desired method (eg. 'Article@index', or just 'MySettings' controller).</p><p class="attireTextType2">Router is built on top of <a href="https://github.com/dbrekalo/backbone-named-routes">https://github.com/dbrekalo/backbone-named-routes</a> package.</p><h4 id="code-example">Code example</h4><p class="attireTextType2">Demo example can be found here: "trim-cmf/demo-app/src/js/routes.js"</p><pre class="attireCodeHighlight"><code>module.exports = function(router) {

    router.resource('article');
    router.resource('tag');
    router.resource('category');

    router.route('', 'dashboard', {uses: 'Article@index'});
    router.route('my-settings', 'mySettings', {uses: 'MySettings'});

};
</code></pre><p class="attireTextType2">Demo example can be found here: "trim-cmf/demo-app/src/js/main.js"</p><pre class="attireCodeHighlight"><code>var app = require('js/app');
var services = require('js/services');

app.registerServices(services).start();
</code></pre><hr class="attireSeparator mod1"></div></section><section id="section-navigation" class="attireBlock"><div class="inner"><h2 id="navigation" class="attireTitleType2">Navigation</h2><p class="attireTextType2">Here you can define all navigation items, user navigation panel, application name and username in your application.</p><p class="attireTextType2">Object "getNavigationItems" accepts following keys:</p><ul class="attireListType1"><li>name - caption and title attribute</li><li>alias - prefix for "Link" class name</li><li>url - router path to desired resource</li><li>iconClass - adds prefix to "Icon" class</li></ul><p class="attireTextType2">Object "getUserNavigationItems" accepts following keys:</p><ul class="attireListType1"><li>name - caption and title attribute</li><li>url - router path to desired resource</li><li>action - if url is ommited, application renders button instead anchor and on click calls action function</li><li>appLink - Boolean value, true is in app link</li><li>newTab - adds target="_blank" attribute to link</li><li>iconClass - adds prefix to "Icon" class</li></ul><p class="attireTextType2">Navigation extends core functions found in "js/components/baseMainNavigation.js" module.</p><h4 id="code-example">Code example</h4><p class="attireTextType2">Demo example can be found here: "trim-cmf/demo-app/src/js/mainNavigation.js"</p><pre class="attireCodeHighlight"><code>var BaseMainNavigation = require('js/components/baseMainNavigation');

module.exports = BaseMainNavigation.extend({

    getNavigationItems: function(router) {

        return [
            {
                name: 'Articles',
                alias: 'article',
                url: router.url('resource.article.index'),
                iconClass: 'Copy'
            },
            {
                name: 'Misc',
                iconClass: 'ThreeDots',
                subItems: [
                    {
                        name: 'Categories',
                        alias: 'category',
                        url: router.url('resource.category.index')
                    },
                    {
                        name: 'Tags',
                        alias: 'tag',
                        url: router.url('resource.tag.index')
                    }
                ]
            }
        ];

    },

    getUserNavigationItems: function(router) {

        return [
            {
                name: 'My settings',
                url: router.url('mySettings'),
                appLink: true
            },
        ];

    },

    getProjectCaption: function() {

        return 'trikoder cms';

    },

    getUserCaption: function() {

        return 'Demo user';

    }

});
</code></pre><hr class="attireSeparator mod1"></div></section><section id="section-localization" class="attireBlock"><div class="inner"><h2 id="localization" class="attireTitleType2">Localization</h2><p class="attireTextType2">Application by default comes with two language presets, English and Croatian (located in 'js/lang/' folder).</p><p class="attireTextType2">Demo example can be found here: "trim-cmf/demo-app/src/js/main.js"</p><pre class="attireCodeHighlight"><code>var app = require('js/app');
var translations = require('js/lang/english');

app.loadTranslations(translations, 'en').start();
</code></pre></div></section></article><footer class="attireFooter"><p>This page is built with <a href="http://dbrekalo.github.io/attire/">Attire</a>.</p></footer><a class="githubRibbon" href="https://github.com/trikoder/trim"><img src="https://gitcdn.xyz/repo/dbrekalo/attire/master/dist/images/githubRibbon.png" alt="Fork me on GitHub"></a><script src="https://gitcdn.xyz/repo/dbrekalo/attire/master/dist/js/docsBuild.min.js"></script></body></html>